[gd_scene load_steps=22 format=4 uid="uid://cu0nevcv16fdi"]

[ext_resource type="Script" path="res://Level/Cam controller/cam_controller.gd" id="2_x58xy"]
[ext_resource type="PackedScene" uid="uid://byauyvuqltrvw" path="res://Unit/nécromancien/nécromancien.tscn" id="3_6rrow"]
[ext_resource type="Script" path="res://Level/Cam controller/unit_select.gd" id="4_xyjs5"]
[ext_resource type="Texture2D" uid="uid://b1h1ll51wx2ra" path="res://Level/Décor/fosse/fosse 0.png" id="5_38220"]
[ext_resource type="Script" path="res://Level/fosse_a_squellette.gd" id="6_7g847"]
[ext_resource type="Texture2D" uid="uid://dy183j5a4vt7v" path="res://Level/Décor/terrain/herbe.png" id="7_iuip1"]
[ext_resource type="PackedScene" uid="uid://didgcpblaia4b" path="res://Unit/poti squellette/poti squellette.tscn" id="8_npqbc"]
[ext_resource type="Script" path="res://Level/Décor/terrain generation.gd" id="8_qxubo"]
[ext_resource type="Script" path="res://Level/day_night_cycle.gd" id="9_d34sj"]
[ext_resource type="Script" path="res://UI/fps.gd" id="9_wtiph"]
[ext_resource type="Texture2D" uid="uid://d1uo675bmndvh" path="res://UI/image.png" id="10_ldxxe"]
[ext_resource type="Texture2D" uid="uid://cokvtcd1t40xj" path="res://UI/image (2).png" id="11_63304"]
[ext_resource type="Texture2D" uid="uid://b6f3mwv8lv8sb" path="res://UI/image (1).png" id="12_kqbog"]

[sub_resource type="CircleShape2D" id="CircleShape2D_r3k5b"]
radius = 162.788

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_8v671"]
texture = ExtResource("7_iuip1")
texture_region_size = Vector2i(1500, 1500)
0:0/0 = 0

[sub_resource type="TileSet" id="TileSet_t4kdc"]
tile_size = Vector2i(1500, 1500)
sources/0 = SubResource("TileSetAtlasSource_8v671")

[sub_resource type="NavigationPolygon" id="NavigationPolygon_ihopg"]
vertices = PackedVector2Array(184.211, -0.601563, 5943.86, -5879.91, 5792.12, 5707.04, 177.594, 42.4609, 175.258, -33.0469, 157.461, 76.0078, -5846.06, 5757.95, 122.938, 99.7422, 88.5, 115.391, 42.6563, 128.938, -4.32813, 131.023, -51.0234, 125.844, -95.5703, 112.367, -140.82, 91.3203, 155.5, -64.8672, -5921.93, -5778.08, 129.438, -84.4219, 87.8281, -107.313, 43.9766, -119.844, 0.1875, -125.047, -50.25, -120.93, -92.8516, -113.656, -129.594, -97.9063, -160.711, -79.0234, -178.313, -42.7188, -186.711, -16.4531, -190.031, 1.25, -188.891, 32.1094, -168.828, 63.3125)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(1, 0, 4), PackedInt32Array(5, 3, 2), PackedInt32Array(5, 2, 6, 7), PackedInt32Array(8, 7, 6), PackedInt32Array(9, 8, 6), PackedInt32Array(10, 9, 6), PackedInt32Array(11, 10, 6), PackedInt32Array(12, 11, 6), PackedInt32Array(13, 12, 6), PackedInt32Array(1, 4, 14), PackedInt32Array(15, 1, 14, 16), PackedInt32Array(15, 16, 17), PackedInt32Array(15, 17, 18), PackedInt32Array(15, 18, 19), PackedInt32Array(15, 19, 20), PackedInt32Array(15, 20, 21), PackedInt32Array(15, 21, 22), PackedInt32Array(15, 22, 23), PackedInt32Array(6, 15, 23, 24), PackedInt32Array(6, 24, 25), PackedInt32Array(6, 25, 26), PackedInt32Array(6, 26, 27), PackedInt32Array(6, 27, 28), PackedInt32Array(6, 28, 13)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-5932, -5788, -5856, 5768, 5802, 5717, 5954, -5890)])

[sub_resource type="Animation" id="Animation_6xvkw"]
resource_name = "day nighy"
length = 12.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CanvasLayer/day night/Path2D/soleil:progress_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 6, 12),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.0, 1.0, 1.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CanvasLayer/day night/Path2D/lune:progress_ratio")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 6, 12),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [1.0, 0.0, 1.0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("CanvasLayer/day night/Path2D/soleil:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 6, 6.03333, 12),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [true, true, false, false]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("CanvasLayer/day night/Path2D/lune:visible")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 6, 6.03333, 12),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [false, false, true, true]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("CanvasLayer/day night/Path2D/soleil:scale")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0, 0.466667, 2, 4, 5.53333, 6),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector2(1e-05, 1e-05), Vector2(0.4, 0.4), Vector2(0.8, 0.8), Vector2(0.8, 0.8), Vector2(0.4, 0.4), Vector2(1e-05, 1e-05)]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("CanvasLayer/day night/Path2D/lune:scale")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(6, 6.46667, 8, 10, 11.5333, 12),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector2(1e-05, 1e-05), Vector2(0.4, 0.4), Vector2(0.8, 0.8), Vector2(0.8, 0.8), Vector2(0.4, 0.4), Vector2(1e-05, 1e-05)]
}
tracks/6/type = "value"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("day_night cycle/CanvasModulate:color")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(0, 1, 5, 6, 7, 11, 12),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Color(0.410025, 0.490822, 0.728245, 1), Color(1, 1, 1, 1), Color(1, 1, 1, 1), Color(0.756291, 0.584098, 0.413742, 1), Color(0.0646193, 0.14478, 0.274938, 1), Color(0.0646193, 0.14478, 0.274938, 1), Color(0.410025, 0.490822, 0.728245, 1)]
}

[sub_resource type="Animation" id="Animation_ys2np"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CanvasLayer/day night/Path2D/soleil:progress_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CanvasLayer/day night/Path2D/lune:progress_ratio")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("CanvasLayer/day night/Path2D/soleil:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("CanvasLayer/day night/Path2D/lune:visible")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("CanvasLayer/day night/Path2D/soleil:scale")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1e-05, 1e-05)]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("CanvasLayer/day night/Path2D/lune:scale")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1e-05, 1e-05)]
}
tracks/6/type = "value"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("day_night cycle/CanvasModulate:color")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_1hnvk"]
_data = {
"RESET": SubResource("Animation_ys2np"),
"day nighy": SubResource("Animation_6xvkw")
}

[sub_resource type="Curve2D" id="Curve2D_hbitj"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, -78, 27, 0, 0, 0, 0, -68, 18, 0, 0, 0, 0, -57, 12, 0, 0, 0, 0, -49, 8, 0, 0, 0, 0, -39, 4, 0, 0, 0, 0, -22, 0, 0, 0, 0, 0, -9, -2, 0, 0, 0, 0, 5, -4, 0, 0, 0, 0, 35, -4, 0, 0, 0, 0, 55, -1, 0, 0, 0, 0, 70, 2, 0, 0, 0, 0, 88, 7, 0, 0, 0, 0, 105, 16, 0, 0, 0, 0, 118, 27)
}
point_count = 14

[node name="Main" type="Node2D"]

[node name="Cam controller" type="Camera2D" parent="."]
position = Vector2(0, -137)
zoom = Vector2(4, 4)
position_smoothing_enabled = true
position_smoothing_speed = 12.0
script = ExtResource("2_x58xy")

[node name="Nécromancien" parent="." instance=ExtResource("3_6rrow")]
position = Vector2(181, -95)

[node name="Unit_select" type="Node2D" parent="."]
z_index = 500
script = ExtResource("4_xyjs5")

[node name="Fosse a squellette" type="Sprite2D" parent="."]
z_index = -500
texture = ExtResource("5_38220")
script = ExtResource("6_7g847")

[node name="StaticBody2D" type="StaticBody2D" parent="Fosse a squellette"]
visible = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Fosse a squellette/StaticBody2D"]
position = Vector2(-4, 0)
scale = Vector2(1, 0.63)
shape = SubResource("CircleShape2D_r3k5b")

[node name="Terrain" type="TileMapLayer" parent="."]
z_index = -4096
tile_map_data = PackedByteArray("AAD/////AAAAAAAAAAD//wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//AAAAAAAAAAD+////AAAAAAAAAAD+/wAAAAAAAAAAAAD+/wEAAAAAAAAAAAD//wEAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAEAAAAAAAAAAAABAAAAAAAAAAAAAAABAP//AAAAAAAAAAABAP7/AAAAAAAAAAAAAP7/AAAAAAAAAAD///7/AAAAAAAAAAD+//7/AAAAAAAAAAD9/wEAAAAAAAAAAAD8/wEAAAAAAAAAAAD8/wAAAAAAAAAAAAD8////AAAAAAAAAAD8//7/AAAAAAAAAAD9//7/AAAAAAAAAAD9////AAAAAAAAAAD9/wAAAAAAAAAAAAACAP7/AAAAAAAAAAACAP//AAAAAAAAAAACAAAAAAAAAAAAAAACAAEAAAAAAAAAAAADAAEAAAAAAAAAAAADAAAAAAAAAAAAAAADAP//AAAAAAAAAAADAP7/AAAAAAAAAAADAP3/AAAAAAAAAAACAP3/AAAAAAAAAAABAP3/AAAAAAAAAAAAAP3/AAAAAAAAAAD9//3/AAAAAAAAAAD8//3/AAAAAAAAAAD+//3/AAAAAAAAAAD///3/AAAAAAAAAAADAPz/AAAAAAAAAAACAPz/AAAAAAAAAAABAPz/AAAAAAAAAAAAAPz/AAAAAAAAAAD///z/AAAAAAAAAAD+//z/AAAAAAAAAAD9//z/AAAAAAAAAAD8//z/AAAAAAAAAAD8/wIAAAAAAAAAAAD9/wIAAAAAAAAAAAD+/wIAAAAAAAAAAAD//wIAAAAAAAAAAAAAAAIAAAAAAAAAAAABAAIAAAAAAAAAAAACAAIAAAAAAAAAAAADAAIAAAAAAAAAAAADAAMAAAAAAAAAAAACAAMAAAAAAAAAAAABAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAD//wMAAAAAAAAAAAD+/wMAAAAAAAAAAAD9/wMAAAAAAAAAAAD8/wMAAAAAAAAAAAA=")
tile_set = SubResource("TileSet_t4kdc")
script = ExtResource("8_qxubo")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="Terrain"]
visible = false
y_sort_enabled = true
navigation_polygon = SubResource("NavigationPolygon_ihopg")

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="Terrain/NavigationRegion2D"]
vertices = PackedVector2Array(-177, -14, -169, -39, -153, -72, -125, -89, -90, -104, -49, -111, 0, -115, 42, -110, 84, -98, 124, -76, 148, -58, 166, -29, 174, 0, 168, 39, 150, 69, 118, 91, 85, 106, 41, 119, -4, 121, -49, 116, -92, 103, -135, 83, -161, 57, -179, 29, -180, 2)
affect_navigation_mesh = true

[node name="Delay" type="Timer" parent="Terrain/NavigationRegion2D"]
wait_time = 0.05
one_shot = true
autostart = true

[node name="Camera2D" type="Camera2D" parent="."]
zoom = Vector2(0.1, 0.1)

[node name="ysort" type="Node2D" parent="."]
y_sort_enabled = true

[node name="Squellette prefab" parent="ysort" instance=ExtResource("8_npqbc")]
position = Vector2(-16, -156)

[node name="day_night cycle" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_1hnvk")
}
script = ExtResource("9_d34sj")

[node name="CanvasModulate" type="CanvasModulate" parent="day_night cycle"]

[node name="day duration" type="Timer" parent="day_night cycle"]
wait_time = 6.0
one_shot = true

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="fps" type="Label" parent="CanvasLayer"]
offset_right = 40.0
offset_bottom = 23.0
text = "FPS : "
script = ExtResource("9_wtiph")

[node name="day night" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -20.0
offset_top = -40.0
offset_right = 20.0
grow_horizontal = 2
grow_vertical = 0

[node name="TextureRect" type="TextureRect" parent="CanvasLayer/day night"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -102.0
offset_top = -48.0
offset_right = 102.0
grow_horizontal = 2
grow_vertical = 0
texture = ExtResource("10_ldxxe")

[node name="Path2D" type="Path2D" parent="CanvasLayer/day night"]
curve = SubResource("Curve2D_hbitj")

[node name="lune" type="PathFollow2D" parent="CanvasLayer/day night/Path2D"]
visible = false
position = Vector2(-78, 27)
scale = Vector2(1e-05, 1e-05)
rotates = false

[node name="Sprite2D" type="Sprite2D" parent="CanvasLayer/day night/Path2D/lune"]
texture = ExtResource("11_63304")

[node name="soleil" type="PathFollow2D" parent="CanvasLayer/day night/Path2D"]
position = Vector2(-78, 27)
scale = Vector2(1e-05, 1e-05)
rotates = false

[node name="Sprite2D" type="Sprite2D" parent="CanvasLayer/day night/Path2D/soleil"]
texture = ExtResource("12_kqbog")

[connection signal="timeout" from="Terrain/NavigationRegion2D/Delay" to="Terrain" method="_on_delay_timeout"]
[connection signal="animation_finished" from="day_night cycle" to="day_night cycle" method="_on_animation_finished"]
[connection signal="timeout" from="day_night cycle/day duration" to="day_night cycle" method="_on_day_duration_timeout"]
